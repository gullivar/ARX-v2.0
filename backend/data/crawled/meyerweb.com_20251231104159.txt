meyerweb.com meyerweb.com Main content Navigation links Footer Post Archives CSS Work Toolbox Writing Speaking Other Stuff About this site Targeting by Reference in the Shadow DOM Published  1 week, 4 days past Iâ€™ve long made it clear that I donâ€™t particularly care for the whole Shadow DOM thing.Â  I believe I understand the problems it tries to solve, and I fully acknowledge that those are problems worth solving.Â  There are just a bunch of things about it that donâ€™t feel right to me, like how it can break accessibility in a number of ways. One of those things is how it breaks stuff like the commandFor attribute on <button> s, or the popoverTarget attribute, or a variety of ARIA attributes such as aria-labelledby .Â  This happens because a Shadow DOMmed component creates a whole separate node tree, which creates a barrier (for a lot of things, to be clear; this is just one class of them) . At least, thatâ€™s been the case.Â  Thereâ€™s now a proposal to fix that , and prototype implementations in both Chrome and Safari!Â  In Chrome, itâ€™s covered by the Experimental Web Platform features flag in chrome://flags .Â  In Safari, you open the Develop > Feature Flagsâ€¦ dialog, search for â€œreferenceTargetâ€, and enable both flags. (Disclosure: My employer, Igalia , with support from NLnet , did the WebKit implementation, and also a Gecko implementation thatâ€™s being reviewed as I write this.) If youâ€™re familiar with Shadow DOMming, you know that there are attributes for the <template> element like shadowRootClonable that set how the Shadow DOM for that particular component can be used.Â  The proposal at hand is for a shadowRootReferenceTarget attribute, which is a string used to identify an element within the Shadowed DOM tree that should be the actual target of any references.Â  This is backed by a ShadowRoot.referenceTarget API feature. Take this simple setup as a quick example. <label for="consent">I agree to join your marketing email list for some reason</label>
<sp-checkbox id="consent">
	<template>
		<input id="setting" type="checkbox" aria-checked="indeterminate">
		<span id="box"></span>	
	</template> </sp-checkbox> Assume thereâ€™s some JavaScript to make that stuff inside the Shadow DOM work as intended. (No, nothing this simple should really be a web component, but letâ€™s assume that someone has created a whole multi-faceted component system for handling rich user interactions or whatever, and someone else has to use it for job-related reasons, and this is one small use of that system.) The problem is, the <label> elementâ€™s for is pointing at consent , which is the ID of the component.Â  The actual thing that should be targeted is the <input> element with the ID of setting .Â  We canâ€™t just change the markup to <label for="setting"> because that <input> is trapped in the Shadow tree, where none in the Light beyond may call for it.Â  So it just plain old doesnâ€™t work. Under the Reference Target proposal, one way to fix this would look something like this in HTML: <label for="consent">I agree to join your marketing email list for some reason</label>
<sp-checkbox id="consent">
	<template shadowRootReferenceTarget="setting">
		<input id="setting" type="checkbox" aria-checked="indeterminate">
		<span id="box"></span>	
	</template> </sp-checkbox> With this markup in place, if someone clicks/taps/otherwise activates the label, it points to the ID consent .Â  That Shadowed component takes that reference and redirects it to an effective target â€”â€‰Â the reference target identified in its shadowRootReferenceTarget attribute. You could also set up the reference with JavaScript instead of an HTML template: <label for="consent">I agree to join your marketing email list for some reason</label>
<sp-checkbox id="consent"></sp-checkbox> class SpecialCheckbox extends HTMLElement {
	checked = "mixed";
	constructor() {
		super();
		this.shadowRoot_ = this.attachShadow({ 
			referenceTarget: "setting"
		});
		
		// lines of code to Make It Go
	
	}
} Either way, the effective target is the <input> with the ID of setting . This can be used in any situation where one element targets another, not just with for .Â  The form and list attributes on inputs would benefit from this.Â  So, too, would the relatively new popoverTarget and commandFor button attributes.Â  And all of the ARIA targeting attributes , like aria-controls and aria-errormessage and aria-owns as well. If reference targets are something you think would be useful in your own work, please give it a try in Chrome or Safari or both, to see if your use cases are being met.Â  If not, you can leave feedback on issue 1120 to share any problems you run into.Â  If weâ€™re going to have a Shadow DOM, the least we can do is make it as accessible and useful as possible. Targeting by Reference in the Shadow DOM was published on Friday, December 19th, 2025 . It was assigned to the DOM , JavaScript , and Standards categories. There has been one reply . Custom Asidenotes Published  2 months, 1 day past Previously on meyerweb , I crawled through a way to turn parenthetical comments into sidenotes, which I called â€œasidenotesâ€.Â  As a recap, these are inline asides in parentheses, which is something I like to do.Â  The constraints are that the text has to start inline, with its enclosing parentheses as part of the static content, so that the parentheses are present if CSS isnâ€™t applied, but should lose those parentheses when turned into asidenotes, while also adding a sentence-terminating period when needed. At the end of that post, I said I wouldnâ€™t use the technique I developed, because the markup was too cluttered and unwieldy, and there were failure states that CSS alone couldnâ€™t handle.Â  So what can we do instead?Â  Extend HTML to do things automatically! If youâ€™ve read my old post â€œ Blinded By the DOM Light â€, you can probably guess how this will go.Â  Basically, we can write a little bit of JavaScript to take an invented element and Do Things To Itâ„¢.Â  What things?Â  Anything JavaScript makes possible. So first, we need an element, one with a hyphen in the middle of its name (because all custom elements require an interior hyphen, similar to how all custom properties and most custom identifiers in CSS require two leading dashes) .Â  Something like: <aside-note>(actual text content)</aside-note> Okay, great!Â  Thanks to HTMLâ€™s permissive handling of unrecognized elements, this completely new element will be essentially treated like a <span> in older browsers.Â  In newer browsers, we can massage it. class asideNote extends HTMLElement {
	connectedCallback() {
		let marker = document.createElement('sup');
		marker.classList.add('asidenote-marker');
		this.after(marker);
	}
}
customElements.define("aside-note",asideNote); With this in place, whenever a supporting browser encounters an <aside-note> element, it will run the JS above.Â  Right now, what that does is insert a <sup> element just after the <aside-note> . â€œWhoa, wait a minuteâ€, I thought to myself at this point. â€œThere will be browsers (mostly older browser versions) that understand custom elements, but donâ€™t support anchor positioning.Â  I should only run this JS if the browser can position with anchors, because I donâ€™t want to needlessly clutter the DOM.Â  I need an @supports query, except in JS!â€ And wouldnâ€™t you know it, such things do exist. class asideNote extends HTMLElement {
	connectedCallback() { if (CSS.supports('bottom','anchor(top)')) { let marker = document.createElement('sup');
			marker.classList.add('asidenote-marker');
			this.after(marker); } }
} That will yield the following DOM structure: <aside-note>(and brower versions)</aside-note><sup></sup> Thatâ€™s all we need to generate some markers and do some positioning, as was done in my previous post.Â  To wit: @supports (anchor-name: --main) {
	#thoughts {
		anchor-name: --main;
	}
	#thoughts article {
		counter-reset: asidenotes;
	}
	#thoughts article sup {
		font-size: 89%;
		line-height: 0.5;
		color: inherit;
		text-decoration: none;
	}
	#thoughts article aside-note::after,
	#thoughts article aside-note + sup::before {
		content: counter(asidenotes);
	}
	#thoughts article aside-note {
		counter-increment: asidenotes;
		position: absolute;
		anchor-name: --asidenote;
		top: max(anchor(top), calc(anchor(--asidenote bottom, 0px) + 0.67em));
		bottom: auto;
		left: calc(anchor(--main right) + 4em);
		max-width: 23em;
		margin-block: 0.15em 0;
		text-wrap: balance;
		text-indent: 0;
		font-size: 89%;
		line-height: 1.25;
		list-style: none;
	}
	#thoughts article aside-note::before {
		content: counter(asidenotes);
		position: absolute;
		top: -0.4em;
		right: calc(100% + 0.25em);
	}
	#thoughts article aside-note::first-letter {
		text-transform: uppercase;
	}
} I went through a lot of that CSS in the previous post , so jump over there to get details on what all that means if the above has you agog.Â  I did add a few bits of text styling like an explicit line height and slight size reduction, and changed all the asidenote classes there to aside-note elements here, but nothing is different with the positioning and such. Letâ€™s go back to the JavaScript, where we can strip off the leading and trailing parentheses with relative ease. class asideNote extends HTMLElement {
	connectedCallback() {
		if (CSS.supports('bottom','anchor(top)')) {
			let marker = document.createElement('sup');
			marker.classList.add('asidenote-marker');
			this.after(marker); let inner = this.innerText;
			if (inner.slice(0,1) == '(' && inner.slice(-1) == ')') {
				inner = inner.slice(1,inner.length-1);}
			this.innerText = inner; }
	}
} This code looks at the innerText of the asidenote, checks to see if it both begins and ends with parentheses (which all asidenotes should!) , and then if so, it strips them out of the text and sets the <aside-note> â€™s innerText to be that stripped string.Â  I decided to set it up so that the stripping only happens if there are balanced parentheses because if there arenâ€™t, Iâ€™ll see that in the post preview and fix it before publishing. I still havenâ€™t added the full stop at the end of the asidenotes, nor have I accounted for asidenotes that end in punctuation, so letâ€™s add in a little bit more code to check for and do that: class asideNote extends HTMLElement {
	connectedCallback() {
		if (CSS.supports('bottom','anchor(top)')) {
			let marker = document.createElement('sup');
			marker.classList.add('asidenote-marker');
			this.after(marker);
			let inner = this.innerText;
			if (inner.slice(0,1) == '(' && inner.slice(-1) == ')') {
				inner = inner.slice(1,inner.length-1);} if (!isLastCharSpecial(inner)) {
				inner += '.';} this.innerText = inner;
		}
	}
} function isLastCharSpecial(str) {
	const punctuationRegex = /[!/?/â€½/.\\]/;
	return punctuationRegex.test(str.slice(-1));
} And with that, there is really only one more point of concern: what will happen to my asidenotes in mobile contexts?Â  Probably be positioned just offscreen, creating a horizontal scrollbar or just cutting off the content completely.Â  Thus, I donâ€™t just need a supports query in my JS.Â  I also need a media query.Â  Itâ€™s a good thing those also exist! class asideNote extends HTMLElement {
	connectedCallback() {
		if (CSS.supports('bottom','anchor(top)') &&
			window.matchMedia('(width >= 65em)').matches ) {
			let marker = document.createElement('sup');
			marker.classList.add('asidenote-marker');
			this.after(marker); Adding that window.matchMedia to the if statementâ€™s test means all the DOM and content massaging will be done only if the browser understands anchor positioning and the window width is above 65 ems, which is my siteâ€™s first mobile media breakpoint that would cause real layout problems.Â  Otherwise, it will leave the asidenote content embedded and fully parenthetical.Â  Your breakpoint will very likely differ, but the principle still holds. The one thing about this JS is that the media query only happens when the custom element is set up, same as the support query.Â  There are ways to watch for changes to the media environment due to things like window resizes, but Iâ€™m not going to use them here.Â  I probably should, but Iâ€™m still not going to. So: will I use this version of asidenotes on meyerweb? I might, Rabbit, I might. I mean, Iâ€™m already using them in this post, so it seems like I should just add the JS to my blog templates and the CSS to my stylesheets so I can keep doing this sort of thing going forward.Â  Any objections?Â  Letâ€™s hear â€™em! Custom Asidenotes was published on Wednesday, October 29th, 2025 . It was assigned to the CSS and JavaScript categories. There have been two replies . Parenthetical Asidenotes Published  2 months, 2 days past Itâ€™s not really a secret I have a thing for sidenotes , and thus for CSS anchored positioning.Â  But a thing I realized about myself is that most of my sidenotes are likely to be tiny asides commenting on the main throughline of the text, as opposed to bibliographic references or other things that usually become actual footnotes or endnotes.Â  The things I would sidenote currently get written as parenthetical inline comments (you know, like this).Â  Asidenotes, if you will. Once I had realized that, I wondered: could I set up a way to turn those parenthetical asides into asidenotes in supporting browsers, using only HTML and CSS?Â  As it turns out, yes, though not in a way I would actually use.Â  In fact, the thing I eventually arrived at is pretty terrible. Okay, allow me to explain. To be crystal clear about this, hereâ€™s how I would want one of these parenthetical asides to be rendered in browsers that donâ€™t support anchored positioning, and then how to render in those that do (which are, as I write this, recent Chromium browsers and Safari Technology Previews; see the anchor() MDN page for the latest ): A parenthetical sitting inline (top) and turned into an asidenote (bottom). My thinking is, the parenthetical text should be the base state, with some HTML to flag the bit thatâ€™s an asidenote, and then CSS is applied in supporting browsers to lay out the text as an asidenote.Â  There is a marker pair to allow an unambiguous association between the two, which is tricky, because that marker should not be in the base text, but should appear when styled. I thought for a minute that I would wrap these little notes in <aside> s, but quickly realized that would probably be a bad idea for accessibility and other reasons.Â  I mean, I could use CSS to cast the <aside> to an inline box instead of its browser-default block box, but Iâ€™d need to label each one separately, be very careful with roles, and so on and so on.Â  It was just the wrong tool, it seemed to me. (Feel free to disagree with me in the comments!) So, I started with this: <span class="asidenote">(Feel free to disagree with me in the comments!)</span> That wasnâ€™t going to be enough, though, because I can certainly position this <span> , but thereâ€™s nothing available to leave a maker behind when I do!Â  Given the intended result, then, there needs to be something in the not-positioned text that serves in that role (by which I mean a utility role, not an ARIA role) .Â  Hereâ€™s where my mind went: <span class="asidenote">(by which I mean a utility role, not an ARIA role)</span><sup></sup> The added <sup> is what will contain the marker text, like 1 or a or whatever. This seemed like it was the minimum viable structure, so I started writing some styles.Â  These asidenotes would be used in my posts, and Iâ€™d want the marker counters to reset with each blog post, so I built the selectors accordingly: @supports not (anchor-name: --main) {
	#thoughts article .asidenote + sup {
		display: none;
	}
} 
@supports (anchor-name: --main) {
	#thoughts {
		anchor-name: --main;
	}
	#thoughts article {
		counter-reset: asidenotes;
	}
	#thoughts article :is(.asidenote::before, .asidenote + sup::before) {
		content: counter(asidenotes);
	}
} So far, Iâ€™ve set a named anchor on the <main> element (which has an id of thoughts ) that encloses a pageâ€™s content, reset a counter on each <article> , and inserted that counter as the ::before content for both the asidenotesâ€™ <span> s and the <sup> s that follow them.Â  That done, itâ€™s time to actually position the asidenotes: #thoughts article .asidenote {
		counter-increment: asidenotes;
		position: absolute;
		anchor-name: --sidenote;
		top: max(calc(anchor(--sidenote bottom, 0px) + 0.67em), anchor(top));
		bottom: auto;
		left: calc(anchor(--main right) + 4em);
		max-width: 23em;
		margin-block: 0.15em 0;
		text-wrap: balance;
		text-indent: 0;
	} Here, each class="asidenote" element increments the asidenotes counter by one, and then the asidenote is absolutely positioned so its top is placed at the larger value of two-thirds of an em below the bottom of the previous asidenote, if any; or else the top of its implicit anchor , which, because I didnâ€™t set an explicit named anchor for it in this case, seems to be the place it would have occupied in the normal flow of the text.Â  This latter bit is long-standing behavior in absolute positioning of inline elements, so it makes sense.Â  Iâ€™m just not sure it fully conforms to the specification , though itâ€™s particularly hard for me to tell in this case. Moving on!Â  The left edge of the asidenote is set 4em to the right of the right edge of --main and then some formatting stuff is done to keep it balanced and nicely sized for its context.Â  Some of you will already have seen whatâ€™s going to happen here. An asidenote with some typographic decoration it definitely should not have in this context. Yep, the parentheses came right along with the text, and in general the whole thing looks a little odd.Â  I could certainly argue that these are acceptable design choices, but itâ€™s not what I want to see.Â  I want the parentheses to go away when laid out as a asidenote, and also capitalize the first letter if it isnâ€™t already, plus close out the text with a full stop. And this is where the whole thing tipped over into â€œI donâ€™t love thisâ€Â territory.Â  I can certainly add bits of text before and after an elementâ€™s content with pseudo-elements, but I canâ€™t subtract bits of text ( not without JavaScript, anyway ) .Â  The best I can do is suppress their display, but for that, I need structure.Â  So I went this route with the markup and CSS: <span class="asidenote"><span>(</span>by which I mean a utility role, not an ARIA role<span>)</span></span><sup></sup> #thoughts article .asidenote span:is(:first-child, :last-child) {
		display: none;
	} I could have used shorter elements like <b> or <i> , and then styled them to look normal, but nah.Â  I donâ€™t love the clutter, but <span> makes more sense here. With those parentheses gone, I can uppercase the the first visible letter and full-stop the end of each asidenote like so: #thoughts article .asidenote::first-letter {
		text-transform: uppercase;
	}
	#thoughts article .asidenote::after {
		content: ".";
	} Then I do a little styling of the asidenoteâ€™s marker: #thoughts article .asidenote::before {
		content: counter(asidenotes);
		position: absolute;
		top: -0.4em;
		right: calc(100% + 0.25em);
	}
} /* closes out the @supports block */ â€¦and thatâ€™s more or less it ( okay, yes, there are a few other tweaks to the markers and their sizes and line heights and asidenote text size and blah blah blah, but letâ€™s not clutter up the main points by slogging through all that ) .Â  With that, I get little asides that are parenthetical in the base text, albeit with a bunch of invisible-to-the-user markup clutter, that will be progressively enhanced into full asidenotes where able. Thereâ€™s an extra usage trap here, as well: if I always generate a full stop at the end, it means I should never end my asidenotes with a question mark, exclamation point, interrobang, or other sentence-ending character.Â  But those are things I like to do! So, will I use this on meyerweb?Â  Heck to the no.Â  The markup clutter is much more annoying than the benefit, it fumbles on some pretty basic use cases, and I donâ€™t really want to go to the lengths of creating weird bespoke text macros â€¯â€”â€‰Â or worse, try to fork and extend a local Markdown parser to add some weird bespoke text pattern â€¯â€”â€‰Â just to make this work.Â  If CSS had a character selector that let me turn off the parentheses without needing the extras <span> s, and some kind of outside-the-element generated content , then maybe yes.Â  Otherwise, no, this is not how Iâ€™d do it, at least outside this post.Â  At the very least, some JavaScript is needed to remove bits of text and decide whether to append the full stop. Given that JS is needed, how would I do it?Â  With custom elements and the Light DOM , which Iâ€™ll document in the next post.Â  Stay tuned! Parenthetical Asidenotes was published on Tuesday, October 28th, 2025 . It was assigned to the CSS category. There have been three replies . Bookmarklet: Load All GitHub Comments (take 2) Published  3 months, 2 weeks past What happened was, I wrote a bookmarklet in early 2024 that would load all of the comments on a lengthy GitHub issue by auto-clicking any â€œLoad moreâ€ buttons in the page, and at some point between then and now GitHub changed their markup in a way that broke it, so I wrote a new one.Â  Here it is: GitHub issue loader (20250913) It totals 258 characters of JavaScript, including the ISO-8601-style void marker, which is smaller than the old version.Â  The old one looked for buttons, checked the .textContent of every single one to find any that said â€œLoad moreâ€, and dispatched a click to each of those.Â  Then it would do that again until it couldnâ€™t find any more such buttons.Â  That worked great until GitHubâ€™s markup got changed so that every button has at least three nested <div> s and <span> s inside itself, so now the button elements have no text content of their own.Â  Why?Â  Who knows.Â  Probably something Copilot or Grok suggested. So, for the new one provided above: when you invoke the bookmarklet, it waits half a second to look for an element on the page with a class value that starts with LoadMore-module__buttonChildrenWrapper .Â  It then dispatches a bubbling click event to that element, waits two seconds, and then repeats the process.Â  Once it repeats the process and finds no such elements, it terminates. I still wish this capability was just provided by GitHub, and maybe if I keep writing about it Iâ€™ll manage to slip the idea into the training set of whatever vibe-coding resource hog they decide to add next.Â  In the meantime, just drag the link above into your toolbar or otherwise bookmark it, use, and enjoy! (And if they break it again, feel free to ping me by commenting here.) Bookmarklet: Load All GitHub Comments (take 2) was published on Sunday, September 14th, 2025 . It was assigned to the Hacks , JavaScript , Tools , and Web categories. There have been two replies . No, Google Did Not Unilaterally Decide to Kill XSLT Published  4 months, 1 week past Itâ€™s uncommon, but not unheard of, for a GitHub issue to spark an uproar.Â  That happened over the past month or so as the WHATWG (Web Hypertext Application Technology Working Group, which I still say should have called themselves a Task Force instead) issue â€œ Should we remove XSLT from the web platform? â€ was opened, debated, and eventually locked once the comment thread started spiraling into personal attacks.Â  Other discussions have since opened, such as a counterproposal to update XSLT in the web platform , thankfully with (thus far) much less heat. If youâ€™re new to the term, XSLT (Extensible Stylesheet Language Transformations) is an XML language that lets you transform one document tree structure into another.Â  If youâ€™ve ever heard of people styling their RSS and/or Atom feeds to look nice in the browser, they were using some amount of XSLT to turn the RSS/Atom into HTML, which they could then CSS into prettiness. This is not the only use case for XSLT, not by a long shot, but it does illustrate the sort of thing XSLT is good for.Â  So why remove it, and who got this flame train rolling in the first place? Before I start, I want to note that in this post, I wonâ€™t be commenting on whether or not XSLT support should be dropped from browsers or not.Â  Iâ€™m also not going to be systematically addressing the various reactions Iâ€™ve seen to all this.Â  I have my own biases around thisâ€¯â€”â€‰some of them in direct conflict with each other!â€¯â€”â€‰but my focus here will be on whatâ€™s happened so far and what might lie ahead. Also, Brian and I talked with Liam Quin about all this, if youâ€™d rather hear a conversation than read a blog post. As a very quick background, various people have proposed removing XSLT support from browsers a few times over the quarter-century-plus since support first landed.Â  It was discussed in both the early and mid-2010s, for example.Â  At this point, browsers all more or less support XSLT 1.0 , whereas the latest version of XSLT is 3.0 .Â  I believe they all do so with C++ code, which is therefore not memory-safe, that is baked into the code base rather than supported via some kind of plugged-in library, like Firefox using PDF.js to support PDFs in the browser. Anyway, back on August 1st, Mason Freed of Google opened issue #11523 on WHATWGâ€™s HTML repository, asking if XSLT should be removed from browsers and giving a condensed set of reasons why it might be a good idea.Â  He also included a WASM-based polyfill heâ€™d written to provide XSLT support, should browsers remove it, and opened â€œ Investigate deprecation and removal of XSLT â€ in the Chromium bug tracker. â€œSo itâ€™s already been decided and we just have to bend over and take the changes our Googlish overlords have decreed!â€ many people shouted.Â  Itâ€™s not hard to see where they got that impression, given some of the things Google has done over the years, but thatâ€™s not whatâ€™s happening here.Â  Not at this point.Â  Iâ€™d like to set some records straight, as an outside observer of both Google and the issue itself. First of all, while Mason was the one to open the issue, this was done because the idea was raised in a periodic WHATNOT meeting (call), where someone at Mozilla was actually the one to bring it up, after it had come up in various conversations over the previous few months.Â  After Mason opened the issue, members of the Mozilla and WebKit teams expressed (tentative, mostly) support for the idea of exploring this removal.Â  Basically, none of the vendors are particularly keen on keeping native XSLT support in their codebases, particularly after security flaws were found in XSLT implementations. This isnâ€™t the first time theyâ€™ve all agreed it might be nice to slim their codebases down a little by removing something that doesnâ€™t get a lot of use (relatively speaking), and it wonâ€™t be the last.Â  I bet theyâ€™ve all talked at some point about how nice it would be to remove BMP support. Mason mentioned that they didnâ€™t have resources to put toward updating their XSLT code, and got widely derided for it. â€œGoogle has trillions of dollars!â€ people hooted. Google has trillions of dollars.Â  The Chrome team very much does not.Â  They probably get, at best, a tiny fraction of one percent of those dollars.Â  Whether Google should give the Chrome team more money is essentially irrelevant, because thatâ€™s not in the Chrome teamâ€™s control.Â  They have what they have, in terms of head count and time, and have to decide how those entirely finite resources are best spent. (I will once again invoke my late-1900s formulation of Hanlonâ€™s Razor : Never attribute to malice that which can be more adequately explained by resource constraints. ) Second of all, the issue was opened to start a discussion and gather feedback as the first stage of a multi-step process, one that could easily run for years.Â  Google, as I assume is true for other browser makers, has a pretty comprehensive method for working out whether removing a given feature is tenable or not. Brian and I talked with Rick Byers about it a while back, and I was impressed by both how many things have been removed, and what they do to make sure theyâ€™re removing the right things. Hereâ€™s one (by no means the only!) way they could go about this: Set up a switch that allows XSLT to be disabled. In the next release of Chrome, use the switch to disable XSLT in one percent of all Chrome downloads. See if any bug reports come in about it.Â  If so, investigate further and adjust as necessary if the problems are not actually about XSLT. If not, up the percentage of XSLT-disabled downloads a little bit at a time over a number of releases.Â  If no bugs are reported as the percentage of XSLT-disabled users trends toward 100%, then prepare to remove it entirely. If, on the other hand, it becomes clear that removing XSLT will be a widely breaking change â€¯â€”â€‰Â where â€œwidelyâ€ can still mean a very tiny portion of their total user baseâ€¯â€”â€‰then XSLT can be re-enabled for all users as soon as possible, and the discussion taken back up with this new information in hand. Again, that is just one of several approaches Google could take, and itâ€™s a lot simpler than what they would most likely actually do, but itâ€™s roughly what they default to, as I understand it.Â  The process is slow and deliberate, building up a picture of actual use and user experience. Third of all, opening a bug that includes a pull request of code changes isnâ€™t a declaration of countdown to merge, itâ€™s a way of making crystal clear (to those who can read the codebase) exactly what the proposal would entail.Â  Itâ€™s basically a requirement for the process of making a decision to start, because it sets the exact parameters of whatâ€™s being decided on. That said, as a result of all this, I now strongly believe that every proposed-removal issue should point to the process and where the issue stands in it. (And write down the process if it hasnâ€™t been already.) This isnâ€™t for the issueâ€™s intended audience, which was other people within WHATWG who are familiar with the usual process and each other, but for cases of context escape, like happened here.Â  If a removal discussion is going to be held in public, then it should assume the general public will see it and provide enough context for the general public to understand the actual nature of the discussion.Â  In the absence of that context, the nature of the discussion will be assumed, and every assumption will be different. There is one thing that we should all keep in mind, which is that â€œremove from the web platformâ€ really means â€œremove from browsersâ€.Â  Even if this proposal goes through, XSLT could still be used server-side.Â  You could use libraries that support XSLT versions more recent than 1.0, even!Â  Thus, XML could still be turned into HTML, just not in the client via native support, though JS or WASM polyfills, or even add-on extensions, would still be an option.Â  Is that good or bad?Â  Like everything else in our field, the answer is â€œit dependsâ€. Just in case your eyes glazed over and you quickly skimmed to see if there was a TL;DR, here it is: The discussion was opened by a Google employee in response to interest from multiple browser vendors in removing built-in XSLT, following a process that is opaque to most outsiders.Â  Itâ€™s a first step in a multi-step evaluation process that can take years to complete, and whose outcome is not predetermined.Â  Tempers flared and the initial discussion was locked; the conversation continues elsewhere.Â  There are good reasons to drop native XSLT support in browsers, and also good reasons to keep or update it, but XSLT is not itself at risk. No, Google Did Not Unilaterally Decide to Kill XSLT was published on Friday, August 22nd, 2025 . It was assigned to the Browsers , Commentary , and XSLT categories. There have been six replies . To Infinityâ€¦ But Not Beyond! Published  4 months, 1 week past Previously on meyerweb , I explored ways to do strange things with the infinity keyword in CSS calculation functions.Â  There were some great comments on that post, by the way; you should definitely go give them a read.Â  Anyway, in this post, Iâ€™ll be doing the same thing, but with different properties! When last we met, Iâ€™d just finished up messing with font sizes and line heights, and that made me think about other text properties that accept lengths, like those that indent text or increase the space between words and letters.Â  You know, like these: div:nth-of-type(1) {text-indent: calc(infinity * 1ch);}
div:nth-of-type(2) {word-spacing: calc(infinity * 1ch);}
div:nth-of-type(3) {letter-spacing: calc(infinity * 1ch);} <div>I have some text and I cannot lie!</div>
<div>I have some text and I cannot lie!</div>
<div>I have some text and I cannot lie!</div> According to Frederic Goudy, I am now the sort of man who would steal a infinite number of sheep.Â  Which is untrue, because, I mean, where would I put them? Consistency across Firefox, Chrome, and Safari Visually, these all came to exactly the same result, textually speaking, with just very small (probably line-height-related) variances in element height.Â  All get very large horizontal overflow scrolling, yet scrolling out to the end of that overflow reveals no letterforms at all; I assume theyâ€™re sat just offscreen when you reach the end of the scroll region.Â  I particularly like how the â€œIâ€ in the first <div> disappears because the first line has been indented a few million (or a few hundred undecillion) pixels, and then the rest of the text is wrapped onto the second line.Â  And in the third <div> , we can check for line-leading steganography ! When you ask for the computed values, though, thatâ€™s when things get weird. Text property results Computed value forâ€¦ Browser text-indent word-spacing letter-spacing Safari 33554428px 33554428px 33554428px Chrome 33554400px 3.40282e+38px 33554400px Firefox (Nightly) 3.40282e+38px 3.40282e+38px 3.40282e+38px Safari and Firefox are at least internally consistent, if many orders of magnitude apart from each other.Â  Chromeâ€¦ I donâ€™t even know what to say.Â  Maybe pick a lane? I have to admit that by this point in my experimentation, I was getting a little bored of infinite pixel lengths.Â  What about infinite unitless numbers, like line-height or â€¯â€”â€‰Â even better â€¯â€” z-index ? div {
	position: absolute;
}
div:nth-of-type(1) {
	top: 10%;
	left: 1em;
	z-index: calc(infinity + 1);
}
div:nth-of-type(2) {
	top: 20%;
	left: 2em;
	z-index: calc(infinity);
}
div:nth-of-type(3) {
	top: 30%;
	left: 3em;
	z-index: 32767;
} <div>Iâ€™m really high!</div>
<div>Iâ€™m really high!</div>
<div>Iâ€™m really high!</div> The result you get in any of Firefox, Chrome, or Safari It turns out that in CSS you can go to infinity, but not beyond, because the computed values were the same regardless of whether the calc() value was infinity or infinity + 1 . z-index values Browser Computed value Safari 2147483647 Chrome 2147483647 Firefox (Nightly) 2147483647 Thus, the first two <div> s were a long way above the third, but were themselves drawn with the later-painted <div> on top of the first.Â  This is because in positioning, if overlapping elements have the same z-index value, the one that comes later in the DOM gets painted over top any that come before it. This does also mean you can have a finite value beat infinity.Â  If you change the previous CSS like so: div:nth-of-type(3) {
	top: 30%;
	left: 3em;
	z-index: 2147483647;
} â€¦then the third <div> is painted atop the other two, because they all have the same computed value.Â  And no, increasing the finite value to a value equal to 2,147,483,648 or higher doesnâ€™t change things, because the computed value of anything in that range is still 2147483647 . The results here led me to an assumption that browsers (or at least the coding languages used to write them) use a system where any â€œinfinityâ€ that has multiplication, addition, or subtraction done to it just returns â€œinfiniteâ€.Â  So if you try to double Infinity , you get back Infinity (or Infinite or Inf or whatever symbol is being used to represent the concept of the infinite).Â  Maybe thatâ€™s entry-level knowledge for your average computer science major, but I was only one of those briefly and I donâ€™t think it was covered in the assembler course that convinced me to find another major. Looking across all those years back to my time in university got me thinking about infinite spans of time, so I decided to see just how long I could get an animation to run. div {
	animation-name: shift;
	animation-duration: calc(infinity * 1s);
}
@keyframes shift {
	from {
		transform: translateX(0px);
	}
	to {
		transform: translateX(100px);
	}
} <div>Iâ€™m timely!</div> The results were truly something to behold, at least in the cases where beholding was possible.Â  Hereâ€™s what I got for the computed animation-duration value in each browserâ€™s web inspector Computed Values tab or subtab: animation-duration values Browser Computed value As years Safari ğŸ¤·ğŸ½ Chrome 1.79769e+308s 5.7004376e+300 Firefox (Nightly) 3.40282e+38s 1.07902714e+31 Those areâ€¦ very long durations.Â  In Firefox, the <div> will finish the animation in just a tiny bit over ten nonillion (ten quadrillion quadrillion) years .Â  Thatâ€™s roughly ten times as long as it will take for nearly all the matter in the known Universe to have been swallowed by supermassive galactic black holes. In Chrome, on the other hand, completing the animation will take approximately half again as long as an incomprehensibly longer amount of time than our current highest estimate for the amount of time it will take for all the protons and neutrons in the observable Universe to decay into radiation, assuming protons actually decay. (Source: Wikipediaâ€™s Timeline of the far future .) â€œOkay, but what about Safari?â€ you may be asking.Â  Well, thereâ€™s no way as yet to find out, because while Safari loads and renders the page like usual, the page then becomes essentially unresponsive.Â  Not the browser, just the page itself.Â  This includes not redrawing or moving the scrollbar gutters when the window is resized, or showing useful information in the Web Inspector.Â  Iâ€™ve already filed a bug , so hopefully one day weâ€™ll find out whether its temporal limitations are the same as Chromeâ€™s or not. It should also be noted that it doesnâ€™t matter whether you supply 1s or 1ms as the thing to multiply with infinity : you get the same result either way.Â  This makes some sense, because any finite number times infinity is still infinity.Â  Well, sort of.Â  But also yes. So what happens if you divide a finite amount by infinity?Â  In browsers, you very consistently get nothing ! div {
	animation-name: shift;
	animation-duration: calc(100000000000000000000000s / infinity);
} (Any finite number could be used there, so I decided to type 1 and then hold the 0 key for a second or two, and use the resulting large number.) Division-by-infinity results Browser Computed value Safari 0 Chrome 0 Firefox (Nightly) 0 Honestly, seeing that kind of cross-browser harmonyâ€¦ that was soothing. And so we come full circle, from something that yielded consistent results to something else that yields consistent results.Â  Sometimes, itâ€™s the little wins that count the most. Just not infinitely. To Infinityâ€¦ But Not Beyond! was published on Wednesday, August 20th, 2025 . It was assigned to the Browsers and CSS categories. There have been three replies . Infinite Pixels Published  4 months, 3 weeks past I was on one of my rounds of social media trawling, just seeing what was floating through the aether, when I came across a toot by Andy P that said: Fun #css trick: width: calc(infinity * 1px); height: calc(infinity * 1px); â€¦and I immediately thought, This is a perfect outer-limits probe! By which I mean, if I hand a browser values that are effectively infinite by way of the infinity keyword , it will necessarily end up clamping to something finite, thus revealing how far itâ€™s able or willing to go for that property. The first thing I did was exactly what Andy proposed, with a few extras to zero out box model extras: div {
	width: calc(infinity * 1px);Â  
	height: calc(infinity * 1px);
	margin: 0;
	padding: 0; } <body>
Â   <div>Iâ€™m huge!</div>
</body> Then I loaded the (fully valid HTML 5) test page in Firefox Nightly, Chrome stable, and Safari stable, all on macOS, and things pretty immediately got weird: Element Size Results Browser Computed value Layout value Safari 33,554,428 33,554,428 Chrome 33,554,400 33,554,400 Firefox (Nightly) 19.2 / 17,895,700 19.2 / 8,947,840 â€  â€  height / width Chrome and Safari both get very close to 2 25 -1 (33,554,431), with Safari backing off from that by just 3 pixels, and Chrome by 31.Â  I canâ€™t even hazard a guess as to why this sort of value would be limited in that way; if there was a period of time where 24-bit values were in vogue, I must have missed it.Â  I assume this is somehow rooted in the pre-Blink-fork codebase, but who knows. (Seriously, who knows?Â  I want to talk to you.) But the faint whiff of oddness there has nothing on whatâ€™s happening in Firefox.Â  First off, the computed height is 19.2px , which is the height of a line of text at default font size and line height.Â  If I explicitly gave it line-height: 1 , the height of the <div> changes to 16px.Â  All this is despite my assigning a height of infinite pixels!Â  Which, to be fair, is not really possible to do, but does it make sense to just drop it on the floor rather than clamp to an upper bound? Even if that can somehow be said to make sense, it only happens with height.Â  The computed width value is, as indicated, nearly 17.9 million, which is not the content width and is also nowhere close to any power of two.Â  But the actual layout width, according to the diagram in the Layout tab, is just over 8.9 million pixels; or, put another way, one-half of 17,895,700 minus 10 . This frankly makes my brain hurt.Â  I would truly love to understand the reasons for any of these oddities.Â  If you know from whence they arise, please, please leave a comment!Â  The more detail, the better.Â  I also accept trackbacks from blog posts if you want to get extra-detailed. For the sake of my aching skullmeats, I almost called a halt there, but I decided to see what happened with font sizes. div {
	width: calc(infinity * 1px);Â  
	height: calc(infinity * 1px);
	margin: 0;
	padding: 0;
	font-size: calc(infinity * 1px); } My skullmeats did not thank me for this, because once again, things gotâ€¦Â interesting. Font Size Results Browser Computed value Layout value Safari 100,000 100,000 Chrome 10,000 10,000 Firefox (Nightly) 3.40282e38 2,400 / 17,895,700 â€  â€  line height values of normal / 1 Safari and Chrome have pretty clearly set hard limits, with Safariâ€™s an order of magnitude larger than Chromeâ€™s.Â  I get it: what are the odds of someone wanting their text to be any larger than, say, a viewport height, let alone ten or 100 times that height?Â  What intrigues me is the nature of the limits, which are so clearly base-ten numbers that someone typed in at some point, rather than being limited by setting a register size or variable length or something that would have coughed up a power of two. And speaking of powers of twoâ€¦ ah, Firefox.Â  Your idiosyncrasy continues.Â  The computed value is a 32-bit single-precision floating-point number.Â  It doesnâ€™t get used in any of the actual rendering, but thatâ€™s what it is.Â  Instead, the actual font size of the text, as judged by the Box Model diagram on the Layout tab, isâ€¦Â 2,400 pixels. Except, I canâ€™t say thatâ€™s the actual actual font size being used: I suspect the actual value is 2,000 with a line height of 1.2, which is generally what normal line heights are in browsers. â€œSo why didnâ€™t you just set line-height: 1 to verify that, genius?â€ I hear you asking.Â  I did!Â  And thatâ€™s when the layout height of the <div> bloomed to just over 8.9 million pixels, like it probably should have in the previous test!Â  And all the same stuff happened when I moved the styles from the <div> to the <body> ! Iâ€™ve started writing at least three different hypotheses for why this happens, and stopped halfway through each because each hypothesis self-evidently fell apart as I was writing it.Â  Maybe if I give my whimpering neurons a rest, I could come up with something.Â  Maybe not.Â  All I know is, Iâ€™d be much happier if someone just explained it to me; bonus points if their name is Clarissa. Since setting line heights opened the door to madness in font sizing, I thought Iâ€™d try setting line-height to infinite pixels and see what came out.Â  This time, things were (relatively speaking) more sane. Line Height Results Browser Computed value Layout value Safari 33,554,428 33,554,428 Chrome 33,554,400 33,554,400 Firefox (Nightly) 17,895,700 8,947,840 Essentially, the results were the same as what happened with element widths in the first example: Safari and Chrome were very close to 2 25 -1, and Firefox had its thing of a strange computed value and a rendering size not quite half the computed value. Iâ€™m sure thereâ€™s a fair bit more to investigate about infinite-pixel values, or about infinite values in general, but Iâ€™m going to leave this here because my gray matter needs a rest and possibly a pressure washing.Â  Still, if you have ideas for infinitely fun things to jam into browser engines and see what comes out, let me know.Â  Iâ€™m already wondering what kind of shenanigans, other than in z-index , I can get up to with calc(-infinity) â€¦ Infinite Pixels was published on Thursday, August 7th, 2025 . It was assigned to the Browsers and CSS categories. There have been eleven replies . Masonry, Item Flow, andâ€¦ GULP? Published  7 months, 1 week past Thereâ€™s a layout type that web designers have been using for a long time now, and yet canâ€™t be easily done with CSS: â€œmasonryâ€ layout, sometimes called â€œyou know, like Pinterest does itâ€ layout.Â  Masonry sits sort of halfway between flexbox and grid layout, which is a big part of why itâ€™s been so hard to formalize.Â  There are those who think of it as an extension of flexbox, and others who think itâ€™s an extension of grid, and both schools of thought have pretty solid cases. So thatâ€™s been a lot of the discussion, which led to competing blog posts from Google ( â€œFeedback needed: How should we define CSS masonry?â€ ) and Apple ( â€œHelp us choose the final syntax for Masonry in CSSâ€ ). Brian and I, with special guest star Rachel Andrew , did an Igalia Chats episode about the debate, which I think is a decent exploration of the pros and cons of each approach for anyone interested. But then, maybe you donâ€™t actually need to explore the two sides of the debate, because thereâ€™s a new proposal in town.Â  Itâ€™s currently being called Item Flow (which I canâ€™t stop hearing sung by Eddie Vedder , please send help) and is explained in some detail in a blog post from the WebKit team .Â  The short summary is that it takes the flow and packing capabilities from flex and grid and puts them into their own set of properties, along with some new capabilities. As an example, hereâ€™s a thing you can currently do with flexbox: display: flex;
flex-wrap: wrap;
flex-direction: column; If the current Item Flow proposals are taken as-is, you could get the same behavior with: display: flex;
item-wrap: wrap;
item-direction: column; â€¦or, you could more compactly write it as: display: flex;
item-flow: wrap column; Now you might be thinking, okay, this just renames some flex properties to talk about items instead and you also get a shorthand property; big deal.Â  It actually is a big deal, though, because these item-* properties would apply in grid settingsas well.Â  In other words, you would be able to say: display: grid;
item-flow: wrap column; Hold up.Â  Item wrappingâ€¦ in grid ?!?Â  Isnâ€™t that just the same as what grid already does?Â  Which is an excellent question, and not one thatâ€™s actually settled. However, letâ€™s invert the wrapping in grid contexts to consider an example given in the WebKit article linked earlier, which is that you could specify a single row of grid items that equally divide up the rowâ€™s width to size themselves, like so: display: grid;
grid-auto-columns: 1fr;
item-wrap: nowrap; In that case, a row of five items would size each item to be one-fifth the width of the row, whereas a row of three items would have each item be one-third the rowâ€™s width.Â  Thatâ€™s a new thing, and quite interesting to ponder. The proposal includes the properties item-pack and item-slack , the latter of which makes me grin a little like J.R. â€œBobâ€ Dobbs but the former of which I find a lot more interesting.Â  Consider: display: flex;
item-wrap: wrap;
item-pack: balance; This would act with flex items much the way text-wrap: balance acts with words .Â  If you have six flex items of roughly equal size, theyâ€™ll balance between two rows to three-and-three rather than five-and-one.Â  Even if your flex items are of very different sizes, item-pack: balance would do always automatically its best to get the row lengths as close to equal as possible, whether thatâ€™s two rows, three rows, four rows, or however many rows.Â  Or columns!Â  This works just as well either way. There are still debates to be had and details to be worked out, but this new direction does feel fairly promising to me.Â  It covers all of the current behaviors that flex and grid flowing already permit, plus it solves some longstanding gripes about each layout approach and while also opening some new doors. The prime example of a new door is the aforementioned masonry layout.Â  In fact, the previous code example is essentially a true masonry layout (because it resembles the way irregular bricks are laid in a wall).Â  If we wanted that same behavior, only vertically like Pinterest does it, we could try: display: flex;
item-direction: column;Â  /* could also be `flex-direction` */
item-wrap: wrap;Â  Â  Â  Â   /* could also be `flex-wrap` */
item-pack: balance; That would be harder to manage, though, since for most writing modes on the web, the width is constrained and the height is not.Â  In other words, to make that work with flexbox, weâ€™d have to set an explicit height.Â  We also wouldnâ€™t be able to nail down the number of columns.Â  Furthermore, that would cause the source order to flow down columns and then jump back to the top of the next column.Â  So, instead, maybe weâ€™d be able to say: display: grid;
grid-template-columns: repeat(3,1fr);
item-direction: row;
item-pack: dense balance; If Iâ€™ve read the WebKit article correctly, that would allow Pinterest-style layout with the items actually going across the columns in terms of source order, but being laid out in packed columns (sometimes called â€œwaterfallâ€ layout, which is to say, â€œmasonryâ€ but rotated 90 degrees). That said, itâ€™s possible Iâ€™m wrong in some of the particulars here, and even if Iâ€™m not, the proposal is still very much in flux.Â  Even the property names could change, so values and behaviors are definitely up for debate. As I pondered that last example, the waterfall/Pinterest layout, I thought: isnâ€™t this visual result essentially what multicolumn layout does?Â  Not in terms of source order, since multicolumn elements run down one column before starting again at the top of the next.Â  But that seems an easy enough thing to recreate like so: display: grid;
grid-template-columns: repeat(3,1fr);
item-direction: column;
item-pack: dense balance; Thatâ€™s a balanced set of three equally wide columns, just like in multicol.Â  I can use gap for the column gaps, so thatâ€™s handled.Â  I wouldnâ€™t be able to set up column rulesâ€¯â€”â€‰at least, not right now, though that may be coming thanks to the Edge teamâ€™s gap decorations proposal .Â  But what I would be able to do, that I canâ€™t now, is vary the width of my multiple columns.Â  Thus: display: grid;
grid-template-columns: 60% 40%; /* or 3fr 2fr, idc */
item-direction: column;
item-pack: dense balance; Is that useful?Â  I dunno!Â  Itâ€™s certainly not a thing we can do in CSS now, though, and if thereâ€™s one thing Iâ€™ve learned in the past almost three decades, itâ€™s that a lot of great new ideas come out of adding new layout capabilities. So, if youâ€™ve made it this far, thanks for reading and I strongly encourage you to go read the WebKit teamâ€™s post if you havenâ€™t already (it has more detail and a lovely summary matrix near the end) and think about what this could do for you, or what it looks like it might fall short of making possible for you. As Iâ€™ve said, this feels promising to me, as it enables what we thought was a third layout mode (masonry/waterfall) by enriching and extending the layout modes we already have (flex/grid).Â  It also feels like this could eventually lead to a Grand Unified Layout Platformâ€¯â€”â€‰a GULP, if you willâ€¯â€”â€‰where we donâ€™t even have to say whether a given layoutâ€™s display is flex or grid , but instead specify the exact behaviors we want using various item-* properties to get just the right ratio of flexible and grid-like qualities for a given situation. â€¦or, maybe, itâ€™s already there.Â  It almost feels like it is, but I havenâ€™t thought about it in enough detail yet to know if there are things itâ€™s missing, and if so, what those might be.Â  All I can say is, my Web-Sense is tingling, so Iâ€™m definitely going to be digging more at this to see what might turn up.Â  Iâ€™d love to hear from all yâ€™all in the comments about what you think! Masonry, Item Flow, andâ€¦ GULP? was published on Wednesday, May 21st, 2025 . It was assigned to the CSS category. There have been five replies . Browse the Archive Earlier Entries Identity Archipelago The excuse of the day is someone let the magic smoke escape All contents of this site, unless otherwise noted, are Â©1993-2025 Eric A. and Kathryn S. Meyer .  All Rights Reserved. " Thoughts From Eric " is powered by WordPress .  Most of the rest of the site is hand-authored. The ink-sketch images used in this siteâ€™s design are adapted from YÅ«zan Moriâ€™s HamonshÅ« , Volumes 1-3 , published in 1903 and made available for public use by the Smithsonian Libraries and the Internet Archive .